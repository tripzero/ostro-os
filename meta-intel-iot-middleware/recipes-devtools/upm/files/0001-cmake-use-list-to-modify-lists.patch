From 41e40bc53b4c9f9257844b40745c3fea63de1446 Mon Sep 17 00:00:00 2001
From: Kevron Rees <tripzero.kev@gmail.com>
Date: Tue, 24 May 2016 10:33:40 -0700
Subject: [PATCH] [cmake] use list() to modify lists

Signed-off-by: Kevron Rees <tripzero.kev@gmail.com>
---
 CMakeLists.txt     | 2 +-
 src/CMakeLists.txt | 8 +++++++-
 2 files changed, 8 insertions(+), 2 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index 283d5a7..8a90ac5 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -14,7 +14,7 @@ pkg_check_modules (MRAA REQUIRED mraa>=1.0.0)
 message (INFO " found mraa version: ${MRAA_VERSION}")
 
 # Appends the cmake/modules path to MAKE_MODULE_PATH variable.
-set (CMAKE_MODULE_PATH ${CMAKE_CURRENT_SOURCE_DIR}/cmake/modules ${CMAKE_MODULE_PATH})
+list (INSERT CMAKE_MODULE_PATH 0 ${CMAKE_CURRENT_SOURCE_DIR}/cmake/modules)
 
 # Set CMAKE_INSTALL_LIBDIR if not defined
 include(GNUInstallDirs)
diff --git a/src/CMakeLists.txt b/src/CMakeLists.txt
index 117f25d..4dd14ac 100644
--- a/src/CMakeLists.txt
+++ b/src/CMakeLists.txt
@@ -42,6 +42,12 @@ macro(upm_SWIG_PYTHON)
       "${PYTHON_INCLUDE_PATH}"
       "${PYTHON_INCLUDE_DIRS}"
      )
+
+    add_custom_target( FinalMessage_${libname} ALL
+      ${CMAKE_COMMAND} -E cmake_echo_color --cyan "python libdir: ${PYTHON_LIBRARIES}"
+      COMMENT "python version: ${PYTHONBUILD_VERSION}"
+    )
+
     install (FILES ${CMAKE_CURRENT_BINARY_DIR}/_pyupm_${libname}.so
          ${CMAKE_CURRENT_BINARY_DIR}/pyupm_${libname}.py
          DESTINATION ${LIB_INSTALL_DIR}/python${PYTHON_VERSION_MAJOR}.${PYTHON_VERSION_MINOR}/site-packages/
@@ -178,7 +184,7 @@ endmacro()
 if (SWIG_FOUND)
   if (BUILDSWIGPYTHON)
     if(NOT PYTHONLIBS_FOUND)
-      find_package (PythonLibs ${PYTHONBUILD_VERSION} REQUIRED)
+      find_package (PythonLibs ${PYTHONBUILD_VERSION} EXACT REQUIRED)
       string (REPLACE "." ";" PYTHON_VERSION_LIST ${PYTHONLIBS_VERSION_STRING})
       list (GET PYTHON_VERSION_LIST 0 PYTHON_VERSION_MAJOR)
       list (GET PYTHON_VERSION_LIST 1 PYTHON_VERSION_MINOR)
-- 
2.7.4

